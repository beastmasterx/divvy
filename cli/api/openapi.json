{"openapi":"3.1.0","info":{"title":"Divvy API","description":"Group expense splitting and settlement API","version":"3.0.0"},"paths":{"/api/v1/members/":{"post":{"tags":["members"],"summary":"Create Member","description":"Create a new member.\n\nReturns:\n    Success or error message","operationId":"create_member_api_v1_members__post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MemberCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MemberMessageResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["members"],"summary":"List Members","description":"List all members.\n\nArgs:\n    active_only: If True, only return active members\n\nReturns:\n    List of members","operationId":"list_members_api_v1_members__get","parameters":[{"name":"active_only","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Active Only"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/MemberResponse"},"title":"Response List Members Api V1 Members  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/members/{member_id}":{"put":{"tags":["members"],"summary":"Update Member","description":"Update a member.\n\nArgs:\n    member_id: ID of the member to update\n    member_data: Member data to update\n\nReturns:\n    Success or error message","operationId":"update_member_api_v1_members__member_id__put","parameters":[{"name":"member_id","in":"path","required":true,"schema":{"type":"integer","title":"Member Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MemberUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MemberMessageResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["members"],"summary":"Get Member","description":"Get a member by ID.\n\nArgs:\n    member_id: ID of the member\n\nReturns:\n    Member details","operationId":"get_member_api_v1_members__member_id__get","parameters":[{"name":"member_id","in":"path","required":true,"schema":{"type":"integer","title":"Member Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MemberResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["members"],"summary":"Remove Member","description":"Remove (deactivate) a member.\n\nArgs:\n    member_id: ID of the member to remove\n\nReturns:\n    Success or error message","operationId":"remove_member_api_v1_members__member_id__delete","parameters":[{"name":"member_id","in":"path","required":true,"schema":{"type":"integer","title":"Member Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MemberMessageResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/members/{member_id}/rejoin":{"post":{"tags":["members"],"summary":"Rejoin Member","description":"Rejoin (reactivate) an inactive member.\n\nArgs:\n    member_id: ID of the member to rejoin\n\nReturns:\n    Success or error message","operationId":"rejoin_member_api_v1_members__member_id__rejoin_post","parameters":[{"name":"member_id","in":"path","required":true,"schema":{"type":"integer","title":"Member Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MemberMessageResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/transactions/expenses":{"post":{"tags":["transactions"],"summary":"Create Expense","description":"Create a new expense.\n\nSupports three expense types:\n- shared: Split among all members, no individual payer\n- personal: Only affects the payer (not split)\n- individual: Split among all members, payer gets credit\n\nReturns:\n    Success or error message","operationId":"create_expense_api_v1_transactions_expenses_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExpenseCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionMessageResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/transactions/deposits":{"post":{"tags":["transactions"],"summary":"Create Deposit","description":"Create a new deposit.\n\nReturns:\n    Success or error message","operationId":"create_deposit_api_v1_transactions_deposits_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DepositCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionMessageResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/transactions/refunds":{"post":{"tags":["transactions"],"summary":"Create Refund","description":"Create a new refund.\n\nReturns:\n    Success or error message","operationId":"create_refund_api_v1_transactions_refunds_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefundCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionMessageResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/periods/":{"get":{"tags":["periods"],"summary":"List Periods","description":"List all periods.\n\nReturns:\n    List of all periods, ordered by start_date descending","operationId":"list_periods_api_v1_periods__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/PeriodResponse"},"type":"array","title":"Response List Periods Api V1 Periods  Get"}}}}}}},"/api/v1/periods/current":{"get":{"tags":["periods"],"summary":"Get Current Period","description":"Get the current active period.\n\nReturns:\n    Current period details","operationId":"get_current_period_api_v1_periods_current_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PeriodResponse"}}}}}}},"/api/v1/periods/current/summary":{"get":{"tags":["periods"],"summary":"Get Current Period Summary","description":"Get comprehensive summary of the current period.\n\nReturns:\n    Period summary with transactions, balances, and totals","operationId":"get_current_period_summary_api_v1_periods_current_summary_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PeriodSummaryResponse"}}}}}}},"/api/v1/periods/{period_id}":{"get":{"tags":["periods"],"summary":"Get Period","description":"Get a specific period by ID.\n\nArgs:\n    period_id: Period ID\n\nReturns:\n    Period details","operationId":"get_period_api_v1_periods__period_id__get","parameters":[{"name":"period_id","in":"path","required":true,"schema":{"type":"integer","title":"Period Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PeriodResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/periods/{period_id}/summary":{"get":{"tags":["periods"],"summary":"Get Period Summary","description":"Get comprehensive summary of a specific period.\n\nArgs:\n    period_id: Period ID\n\nReturns:\n    Period summary with transactions, balances, and totals","operationId":"get_period_summary_api_v1_periods__period_id__summary_get","parameters":[{"name":"period_id","in":"path","required":true,"schema":{"type":"integer","title":"Period Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PeriodSummaryResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/periods/{period_id}/balances":{"get":{"tags":["periods"],"summary":"Get Period Balances","description":"Get balances for a specific period.\n\nArgs:\n    period_id: Period ID\n\nReturns:\n    Dictionary of member names to balance descriptions","operationId":"get_period_balances_api_v1_periods__period_id__balances_get","parameters":[{"name":"period_id","in":"path","required":true,"schema":{"type":"integer","title":"Period Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Period Balances Api V1 Periods  Period Id  Balances Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/periods/current/settle":{"post":{"tags":["periods"],"summary":"Settle Current Period","description":"Settle the current period and create a new period.\n\nArgs:\n    request: Settlement request with optional new period name\n\nReturns:\n    Success or error message","operationId":"settle_current_period_api_v1_periods_current_settle_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PeriodSettleRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PeriodSettleResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/settlement/balances":{"get":{"tags":["settlement"],"summary":"Get Settlement Balances","description":"Get final settlement balances for all members.\n\nCalculates total paid vs. total share to determine who owes money\nand who is owed money.\n\nReturns:\n    List of member balances with descriptions","operationId":"get_settlement_balances_api_v1_settlement_balances_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SettlementBalanceResponse"}}}}}}},"/api/v1/settlement/plan":{"get":{"tags":["settlement"],"summary":"Get Settlement Plan","description":"Get settlement plan without executing it.\n\nCalculates the transactions that would be created to settle balances.\n\nArgs:\n    period_id: Optional period ID (defaults to current period)\n\nReturns:\n    List of settlement transactions that would be created","operationId":"get_settlement_plan_api_v1_settlement_plan_get","parameters":[{"name":"period_id","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Period ID (defaults to current period)","title":"Period Id"},"description":"Period ID (defaults to current period)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SettlementPlanResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/system/status":{"get":{"tags":["system"],"summary":"Get System Status","description":"Get comprehensive system status.\n\nIncludes:\n- Member information (active/inactive, remainder flags)\n- Settlement balances\n- Transaction statistics\n- Current period information\n\nReturns:\n    Complete system status","operationId":"get_system_status_api_v1_system_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SystemStatusResponse"}}}}}}},"/api/v1/categories/":{"get":{"tags":["categories"],"summary":"List Categories","description":"List all categories.\n\nReturns:\n    List of all categories, ordered by name","operationId":"list_categories_api_v1_categories__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/CategoryResponse"},"type":"array","title":"Response List Categories Api V1 Categories  Get"}}}}}}},"/":{"get":{"summary":"Root","description":"Root endpoint.","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/health":{"get":{"summary":"Health Check","description":"Health check endpoint.","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"CategoryResponse":{"properties":{"id":{"type":"integer","title":"Id","description":"Category ID"},"name":{"type":"string","title":"Name","description":"Category name"}},"type":"object","required":["id","name"],"title":"CategoryResponse","description":"Schema for category response."},"DepositCreate":{"properties":{"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"Transaction description"},"amount":{"type":"string","title":"Amount","description":"Amount as dollar string (e.g., '123.45')"},"payer_name":{"type":"string","title":"Payer Name","description":"Name of the member making the deposit"}},"type":"object","required":["amount","payer_name"],"title":"DepositCreate","description":"Schema for creating a deposit."},"ExpenseCreate":{"properties":{"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"Transaction description"},"amount":{"type":"string","title":"Amount","description":"Amount as dollar string (e.g., '123.45')"},"payer_name":{"type":"string","title":"Payer Name","description":"Name of the member paying"},"category_name":{"type":"string","title":"Category Name","description":"Expense category name"},"is_personal":{"type":"boolean","title":"Is Personal","description":"Whether this is a personal expense (not split)","default":false},"expense_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Expense Type","description":"Expense type: 'shared', 'personal', or 'individual' (default: 'individual')"}},"type":"object","required":["amount","payer_name","category_name"],"title":"ExpenseCreate","description":"Schema for creating an expense."},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"MemberBalance":{"properties":{"member_name":{"type":"string","title":"Member Name","description":"Member name"},"balance_description":{"type":"string","title":"Balance Description","description":"Formatted balance description (e.g., 'Is owed $123.45', 'Owes $67.89', or 'Settled')"}},"type":"object","required":["member_name","balance_description"],"title":"MemberBalance","description":"Schema for a member's balance in a period."},"MemberCreate":{"properties":{"email":{"type":"string","format":"email","title":"Email","description":"Member email address"},"name":{"type":"string","minLength":1,"title":"Name","description":"Member name"}},"type":"object","required":["email","name"],"title":"MemberCreate","description":"Schema for creating a new member."},"MemberMessageResponse":{"properties":{"message":{"type":"string","title":"Message"}},"type":"object","required":["message"],"title":"MemberMessageResponse","description":"Schema for member operation result messages."},"MemberResponse":{"properties":{"id":{"type":"integer","title":"Id"},"email":{"type":"string","title":"Email"},"name":{"type":"string","title":"Name"},"is_active":{"type":"boolean","title":"Is Active"},"paid_remainder_in_cycle":{"type":"boolean","title":"Paid Remainder In Cycle"}},"type":"object","required":["id","email","name","is_active","paid_remainder_in_cycle"],"title":"MemberResponse","description":"Schema for member response."},"MemberUpdate":{"properties":{"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"}},"type":"object","title":"MemberUpdate","description":"Schema for updating member status."},"PeriodResponse":{"properties":{"id":{"type":"integer","title":"Id"},"name":{"type":"string","title":"Name"},"start_date":{"type":"string","format":"date-time","title":"Start Date"},"end_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"End Date"},"is_settled":{"type":"boolean","title":"Is Settled"},"settled_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Settled Date"}},"type":"object","required":["id","name","start_date","end_date","is_settled","settled_date"],"title":"PeriodResponse","description":"Schema for period response."},"PeriodSettleRequest":{"properties":{"period_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Period Name","description":"Name for the new period (auto-generated if not provided)"}},"type":"object","title":"PeriodSettleRequest","description":"Schema for settling a period."},"PeriodSettleResponse":{"properties":{"message":{"type":"string","title":"Message"}},"type":"object","required":["message"],"title":"PeriodSettleResponse","description":"Schema for period settlement response."},"PeriodSummaryResponse":{"properties":{"period":{"$ref":"#/components/schemas/PeriodResponse"},"transactions":{"items":{"$ref":"#/components/schemas/TransactionResponse"},"type":"array","title":"Transactions"},"balances":{"items":{"$ref":"#/components/schemas/MemberBalance"},"type":"array","title":"Balances"},"totals":{"$ref":"#/components/schemas/PeriodTotalsResponse"},"transaction_count":{"type":"integer","title":"Transaction Count"}},"type":"object","required":["period","transactions","balances","totals","transaction_count"],"title":"PeriodSummaryResponse","description":"Schema for period summary response."},"PeriodTotalsResponse":{"properties":{"deposits":{"type":"integer","title":"Deposits","description":"Total deposits in cents"},"deposits_formatted":{"type":"string","title":"Deposits Formatted","description":"Total deposits formatted as dollars"},"expenses":{"type":"integer","title":"Expenses","description":"Total expenses in cents"},"expenses_formatted":{"type":"string","title":"Expenses Formatted","description":"Total expenses formatted as dollars"},"net":{"type":"integer","title":"Net","description":"Net amount (deposits - expenses) in cents"},"net_formatted":{"type":"string","title":"Net Formatted","description":"Net amount formatted as dollars"}},"type":"object","required":["deposits","deposits_formatted","expenses","expenses_formatted","net","net_formatted"],"title":"PeriodTotalsResponse","description":"Schema for period totals."},"RefundCreate":{"properties":{"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"Transaction description"},"amount":{"type":"string","title":"Amount","description":"Amount as dollar string (e.g., '123.45')"},"member_name":{"type":"string","title":"Member Name","description":"Name of the member to refund"}},"type":"object","required":["amount","member_name"],"title":"RefundCreate","description":"Schema for creating a refund."},"SettlementBalanceResponse":{"properties":{"balances":{"items":{"$ref":"#/components/schemas/MemberBalance"},"type":"array","title":"Balances"}},"type":"object","required":["balances"],"title":"SettlementBalanceResponse","description":"Schema for settlement balance response."},"SettlementPlanResponse":{"properties":{"transactions":{"items":{"$ref":"#/components/schemas/SettlementTransaction"},"type":"array","title":"Transactions"}},"type":"object","required":["transactions"],"title":"SettlementPlanResponse","description":"Schema for settlement plan response."},"SettlementTransaction":{"properties":{"date":{"type":"string","title":"Date"},"transaction_type":{"type":"string","title":"Transaction Type"},"amount":{"type":"integer","title":"Amount"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"payer_id":{"type":"integer","title":"Payer Id"},"payer_name":{"type":"string","title":"Payer Name"},"from_to":{"type":"string","title":"From To"}},"type":"object","required":["date","transaction_type","amount","description","payer_id","payer_name","from_to"],"title":"SettlementTransaction","description":"Schema for a settlement transaction."},"SystemMemberInfo":{"properties":{"id":{"type":"integer","title":"Id","description":"Member ID"},"name":{"type":"string","title":"Name","description":"Member name"},"is_active":{"type":"boolean","title":"Is Active","description":"Whether the member is active"},"paid_remainder_in_cycle":{"type":"boolean","title":"Paid Remainder In Cycle","description":"Whether the member has paid remainder in cycle"},"period_balance":{"type":"string","title":"Period Balance","description":"Period balance description (e.g., 'Is owed $123.45', 'Owes $67.89', or 'N/A')"}},"type":"object","required":["id","name","is_active","paid_remainder_in_cycle","period_balance"],"title":"SystemMemberInfo","description":"Schema for member information in system status."},"SystemStatusResponse":{"properties":{"current_period":{"anyOf":[{"$ref":"#/components/schemas/PeriodResponse"},{"type":"null"}]},"period_summary":{"anyOf":[{"$ref":"#/components/schemas/PeriodSummaryResponse"},{"type":"null"}]},"total_members":{"type":"integer","title":"Total Members"},"active_members_count":{"type":"integer","title":"Active Members Count"},"inactive_members_count":{"type":"integer","title":"Inactive Members Count"},"members":{"items":{"$ref":"#/components/schemas/SystemMemberInfo"},"type":"array","title":"Members"},"transaction_counts":{"$ref":"#/components/schemas/TransactionCounts"}},"type":"object","required":["current_period","period_summary","total_members","active_members_count","inactive_members_count","members","transaction_counts"],"title":"SystemStatusResponse","description":"Schema for system status response."},"TransactionCounts":{"properties":{"total":{"type":"integer","title":"Total","description":"Total number of transactions"},"deposits":{"type":"integer","title":"Deposits","description":"Number of deposit transactions"},"expenses":{"type":"integer","title":"Expenses","description":"Number of expense transactions"}},"type":"object","required":["total","deposits","expenses"],"title":"TransactionCounts","description":"Schema for transaction counts in system status."},"TransactionMessageResponse":{"properties":{"message":{"type":"string","title":"Message"}},"type":"object","required":["message"],"title":"TransactionMessageResponse","description":"Schema for transaction operation result messages."},"TransactionResponse":{"properties":{"id":{"type":"integer","title":"Id"},"transaction_type":{"type":"string","title":"Transaction Type"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"amount":{"type":"integer","title":"Amount"},"payer_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Payer Id"},"payer_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Payer Name"},"category_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Category Id"},"category_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category Name"},"period_id":{"type":"integer","title":"Period Id"},"is_personal":{"type":"boolean","title":"Is Personal"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"}},"type":"object","required":["id","transaction_type","description","amount","payer_id","payer_name","category_id","category_name","period_id","is_personal","timestamp"],"title":"TransactionResponse","description":"Schema for transaction response."},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}